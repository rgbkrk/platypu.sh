<div id="root">
	<img src="./platash-01.svg" />
</div>

<style>
  html,body {
    margin: 0;
    padding: 0;
  }
</style>

<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

<script type="text/babel">
    var el = document.getElementById("root");

    const images = [
      "./platash-01.svg",
      "./platash-02.svg"
    ];

    class AnimatedPlatypus extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          index: 0,
          width: 500,
          speed: 1000,
        }
      }

      updateImage = () => {
          this.setState(state => ({
            index: (state.index + 1) % images.length,
					}))
        };

      componentDidMount() {
        this.intervalId = setInterval(this.updateImage, this.convertSpeedToDelay(this.state.speed));
      }

      handleSizeChange = (ev) => {
        this.setState({
          width: ev.target.value
        })
      }
      
      convertSpeedToFPS = (speed) => {
        var delay = 2000- speed;
        return Math.round(100/(delay /500 )) / 100;
      }

      convertSpeedToDelay = (speed) => {
        return 2000 - speed;
      }

      handleSpeedChange = (ev) => {
        const speed = parseInt(ev.target.value);

        this.setState(state => {
          return { speed };
        },
        () => {
          clearInterval(this.intervalId);
          this.intervalId = setInterval(this.updateImage, this.convertSpeedToDelay(speed));
        })
      }

      render() {
        return (
          <div style={{background: "lightblue", padding: "20px", width: '100%', height:'100%'}}>
            <label>Size: {this.state.width}</label>
            <input
              defaultValue={this.state.width}
              min="50" max="1000" step="10" type="range"
              onChange={this.handleSizeChange}
              style={{display: 'block'}}
            />
            <label>Flaps per Second (fps): {this.convertSpeedToFPS(this.state.speed)}</label>
            <input
              defaultValue={this.state.speed}
              min="50" max="2000" step="10" type="range"
              onChange={this.handleSpeedChange}
              style={{display: 'block'}}
            />
            <img
            src={images[this.state.index]}
            width={this.state.width}
            style={{display: 'block', marginRight: 'auto', marginLeft: 'auto'}}/>
          </div>
        );
      }

    }


    ReactDOM.render(<AnimatedPlatypus />, el);

</script>
